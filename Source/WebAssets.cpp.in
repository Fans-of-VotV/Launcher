#include "../WebAssets.hpp"

void WebAssets::Initialize() {
  @ASSET_TEMPLATE_BEGIN@
  {
    static uint8_t asset@ASSET_ID@_data[] = {@ASSET_BYTES@};
    auto pathname = std::string{"@ASSET_PATHNAME@"};
    m_assets.emplace(pathname, std::make_unique<WebAsset>(
      @ASSET_ID@,
      pathname,
      "@ASSET_MIME_TYPE@",
      asset@ASSET_ID@_data,
      sizeof(asset@ASSET_ID@_data)
    ));
  }
  @ASSET_TEMPLATE_END@
}

WebAsset* WebAssets::Get(std::string_view pathname) {
  auto it = m_assets.find(std::string{pathname});

  if (it == m_assets.end())
    return nullptr;

  return it->second.get();
}
